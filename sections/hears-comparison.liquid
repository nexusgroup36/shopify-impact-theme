{% comment %}
  Hears – Comparison Table (3 columns)
  - Left: headline + subtext
  - Right: feature list + 3 columns (Hears, Other, Foam)
  - Add rows via blocks in the editor.
{% endcomment %}

<section class="hears-compare" style="
  --title-size: {{ section.settings.title_size | default: 48 }}px;
  --title-size-mobile: {{ section.settings.title_size_mobile | default: 36 }}px;
  --features-text-size: 15px;
  --features-text-mobile: 14px;
  --feature-height: 57px;
  --feature-height-mobile: 52px;

  --gradient-2-start: {{ section.settings.col1_bg_start | default: '#f7f7f7' }};
  --gradient-2-end:   {{ section.settings.col1_bg_end   | default: '#f7f7f7' }};
  --gradient-2-text:  {{ section.settings.col1_text     | default: '#1a1a1a' }};

  --gradient-3-start: {{ section.settings.hears_bg_start | default: '#ef7273' }};
  --gradient-3-end:   {{ section.settings.hears_bg_end   | default: '#faa37d' }};
  --gradient-3-text:  {{ section.settings.hears_text     | default: '#ffffff' }};

  --accent: {{ section.settings.accent_color | default: '#feba84' }};
  --text:   {{ section.settings.text_color   | default: '#000000' }};
">
  <div class="container">
    <div class="grid">
      <!-- LEFT COPY -->
      <div class="copy">
        <h1 class="title">
          {{ section.settings.title | newline_to_br }}
          {% if section.settings.highlight != blank %}
            <br>the <span class="accent">{{ section.settings.highlight }}</span>
          {% endif %}
        </h1>
        {% if section.settings.subtitle != blank %}
          <p class="subtitle">{{ section.settings.subtitle }}</p>
        {% endif %}
      </div>

      <!-- RIGHT TABLE -->
      <div class="table">
        <!-- Logos / column headers -->
        <div class="table-head">
          <div class="head head--blank"></div>

          <div class="head head--hears">
            <div class="brand">
              {% if section.settings.hears_logo != blank %}
                <img src="{{ section.settings.hears_logo | image_url: width: 180 }}" alt="Hears">
              {% else %}
                <strong style="color:var(--gradient-3-text)">Hears</strong>
              {% endif %}
            </div>
          </div>

          <div class="head head--other">
            <div class="brand">
              {% if section.settings.other_logo != blank %}
                <img src="{{ section.settings.other_logo | image_url: width: 180 }}" alt="{{ section.settings.other_label }}">
              {% endif %}
              <span class="brand-sub">{{ section.settings.other_label }}</span>
            </div>
          </div>

          <div class="head head--foam">
            <div class="brand">
              {% if section.settings.foam_logo != blank %}
                <img src="{{ section.settings.foam_logo | image_url: width: 180 }}" alt="{{ section.settings.foam_label }}">
              {% endif %}
              <span class="brand-sub">{{ section.settings.foam_label }}</span>
            </div>
          </div>
        </div>

        <!-- Body rows -->
        <div class="table-body">
          <!-- Feature names -->
          <!-- Feature names -->
<ul class="features">
  {% for block in section.blocks %}
    <li {{ block.shopify_attributes }}>
      <span class="feature-label" title="{{ block.settings.feature | escape }}">
        {{ block.settings.feature | escape }}
      </span>
    </li>
  {% endfor %}
</ul>


          <!-- Hears column (always ✓) -->
          <ul class="col col--hears">
            {% for block in section.blocks %}
              <li class="yes">
                <span class="icon-check-small">
                  <svg viewBox="0 0 100 100" aria-hidden="true"><path d="M96.975 24.985 36.627 85.332c-.702.7-1.839.7-2.542 0L3.025 54.27c-.7-.703-.7-1.84 0-2.542l7.775-7.775c.703-.7 1.84-.7 2.542 0L35.358 65.97l51.3-51.3c.703-.7 1.84-.7 2.542 0l7.775 7.774c.7.703.7 1.84 0 2.542z" fill="#d54d51"/></svg>
                </span>
              </li>
            {% endfor %}
          </ul>

          <!-- Other column -->
          <ul class="col col--other">
            {% for block in section.blocks %}
              {% if block.settings.other_has %}
                <li class="yes">
                  <span class="icon-check-small">
                    <svg viewBox="0 0 100 100" aria-hidden="true"><path d="M96.975 24.985 36.627 85.332c-.702.7-1.839.7-2.542 0L3.025 54.27c-.7-.703-.7-1.84 0-2.542l7.775-7.775c.703-.7 1.84-.7 2.542 0L35.358 65.97l51.3-51.3c.703-.7 1.84-.7 2.542 0l7.775 7.774c.7.703.7 1.84 0 2.542z" fill="#d54d51"/></svg>
                  </span>
                </li>
              {% else %}
                <!-- NO: X inside the SAME 24×24 icon box -->
                <li class="no">
                  <span class="icon-check-small icon-x">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M6 6l12 12M18 6L6 18" stroke="#d54d51" stroke-width="2.2" stroke-linecap="round" fill="none"/>
                    </svg>
                  </span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>

          <!-- Foam column -->
          <ul class="col col--foam">
            {% for block in section.blocks %}
              {% if block.settings.foam_has %}
                <li class="yes">
                  <span class="icon-check-small">
                    <svg viewBox="0 0 100 100" aria-hidden="true"><path d="M96.975 24.985 36.627 85.332c-.702.7-1.839.7-2.542 0L3.025 54.27c-.7-.703-.7-1.84 0-2.542l7.775-7.775c.703-.7 1.84-.7 2.542 0L35.358 65.97l51.3-51.3c.703-.7 1.84-.7 2.542 0l7.775 7.774c.7.703.7 1.84 0 2.542z" fill="#d54d51"/></svg>
                  </span>
                </li>
              {% else %}
                <!-- NO: X inside the SAME 24×24 icon box -->
                <li class="no">
                  <span class="icon-check-small icon-x">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M6 6l12 12M18 6L6 18" stroke="#d54d51" stroke-width="2.2" stroke-linecap="round" fill="none"/>
                    </svg>
                  </span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <style>
    .hears-compare{background:#fff;color:var(--text);padding:60px 20px}
    .hears-compare .container{max-width:1200px;margin:0 auto}
    .hears-compare .grid{display:grid;grid-template-columns:1fr 1.2fr;gap:60px;align-items:center}

    .hears-compare .title{font-size:var(--title-size);line-height:1;margin:0 0 16px}
    .hears-compare .accent{color:var(--accent)}
    .hears-compare .subtitle{margin:0;color:#111;opacity:.9}

    .table{display:flex;flex-direction:column;gap:12px}
    .table-head{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:12px}
    .head{border-radius:12px;padding:16px;display:flex;align-items:center;justify-content:center;background:#fff}
    .head--blank{background:transparent}
    .head--hears{background:linear-gradient(180deg,var(--gradient-3-start),var(--gradient-3-end));color:var(--gradient-3-text)}
    .brand{display:flex;flex-direction:column;align-items:center;gap:8px}
    .brand img{max-width:100px;height:auto}
    .brand-sub{font-size:12px;color:#000;opacity:.8}

    .table-body{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:12px}
    .features,
    .col{list-style:none;margin:0;padding:0;background:#fff;border-radius:12px;overflow:hidden}
    .features{background:linear-gradient(180deg,var(--gradient-2-start),var(--gradient-2-end));color:var(--gradient-2-text)}
    .col--hears{background:linear-gradient(180deg,var(--gradient-3-start),var(--gradient-3-end))}
    .col--other,.head--other{background:#fff}
    .col--foam,.head--foam{background:#fff}

    .features li,
    .col li{display:flex;align-items:center;justify-content:flex-start;height:var(--feature-height);padding:0 24px;border-bottom:1px solid rgba(0,0,0,.06);font-size:var(--features-text-size)}
    .features li:last-child,.col li:last-child{border-bottom:none}
    .col li{justify-content:center}

    /* 24×24 icon box used by both ✓ and ✕ */
    .icon-check-small{width:24px;height:24px;border-radius:999px;background:#fff;display:flex;align-items:center;justify-content:center}
    .icon-check-small svg{width:14px;height:14px}

    /* ---------- WIDTH/OVERFLOW safeguards you added ---------- */
    .section-hears-compare .hears-compare { overflow-x: clip; }
    .section-hears-compare .hears-compare * { box-sizing: border-box; }
    .section-hears-compare .hears-compare .container{ max-width: 1100px; width: 100%; margin-inline: auto; padding-inline: 16px; }
    .section-hears-compare .table-head,
    .section-hears-compare .table-body{ width: 100%; grid-template-columns: 1.6fr repeat(3, minmax(0, 1fr)); }
    .section-hears-compare .brand img{ display:block; width: clamp(60px, 9vw, 100px); max-width:100%; height:auto; object-fit:contain; }
    .section-hears-compare .features li,
    .section-hears-compare .col li{ padding-inline: 18px; word-break: break-word; }
    @media (max-width:1024px){ .section-hears-compare .hears-compare .container{ max-width:720px; } }
    @media (max-width:768px){
      .table-head,.table-body{ grid-template-columns:115px repeat(3, minmax(0, 1fr)); gap:6px; }
      .features li,.col li{ height:var(--feature-height-mobile); padding:0 12px; font-size:var(--features-text-mobile) }
      .icon-check-small{ width:20px;height:20px }
      .icon-check-small svg{ width:12px;height:12px }
      .brand img{ max-width:72px }
      .brand-sub{ font-size:10px }
      .hears-compare{ padding:40px 16px }
    }

    /* ---------- CRITICAL: make the NO state use the SAME 24×24 box ---------- */
    /* remove any previous pill styles */
    .col li.no{
      background: transparent !important;
      width: auto !important;
      height: auto !important;
      padding: 0 !important;
      margin: 0 !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      font-size: 0 !important;              /* hide stray text if any */
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
    }
    /* ensure the X icon sits in the same 24×24 white circle box */
    .col li.no .icon-check-small.icon-x{
      width:24px; height:24px; border-radius:999px; background:#fff;
      display:flex; align-items:center; justify-content:center;
    }
    .col li.no .icon-check-small.icon-x svg{
      width:14px; height:14px; display:block;
    }
    /* ============ MOBILE FIX: make the table full-width and stable ============ */
@media (max-width: 768px){

  /* 1) One column layout + full-width table */
  .hears-compare .grid{
    grid-template-columns: 1fr !important;
    gap: 28px !important;
  }
  .hears-compare .table{
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
  }

  /* 2) Proper 4-column grid on mobile (feature + 3 cols) */
  .hears-compare .table-head,
  .hears-compare .table-body{
    width: 100% !important;
    grid-template-columns: 115px 1fr 1fr 1fr !important;
    gap: 6px !important;
  }

  /* 3) Prevent any child from forcing a width and causing the strip effect */
  .hears-compare .head,
  .hears-compare .features,
  .hears-compare .col{
    min-width: 0 !important;          /* crucial: allows cells to shrink */
    overflow: hidden;                  /* avoid accidental overflow */
  }

  /* 4) Tighter visuals on mobile */
  .hears-compare .features li,
  .hears-compare .col li{
    height: var(--feature-height-mobile) !important;
    padding: 0 12px !important;
    font-size: var(--features-text-mobile) !important;
  }
  .hears-compare .brand img{ max-width: 64px !important; height: auto !important; }
  .hears-compare .brand-sub{ font-size: 11px !important; white-space: normal !important; }
}

/* ============ ICON CONSISTENCY: same box for ✓ and ✕ ============ */
/* remove any old pill styles on NO cells */
.col li.no{
  background: transparent !important;
  width: auto !important;
  height: auto !important;
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  font-size: 0 !important; /* hide stray text "✕" if present */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}
/* NO state uses same 24×24 white circle as YES */
.col li.no .icon-check-small.icon-x{
  width: 24px; height: 24px; border-radius: 999px; background: #fff;
  display: flex; align-items: center; justify-content: center;
}
.col li.no .icon-check-small.icon-x svg{
  width: 14px; height: 14px; display: block;
}
/* ===== FINAL LOCK: rows same height + X uses same 24×24 icon box as ✓ ===== */

/* 1) Single row height everywhere (tweak to taste) */
.hears-compare{ --feature-height: 68px; }                 /* desktop */
@media (max-width:768px){ .hears-compare{ --feature-height: 58px; }}

/* 2) Apply that height + perfect centering to ALL cells */
.hears-compare .features li,
.hears-compare .col li{
  height: var(--feature-height) !important;
  display: flex !important;
  align-items: center !important;       /* vertical center */
  justify-content: center !important;   /* center ✓/✕ */
  padding: 0 18px !important;
  margin: 0 !important;
  line-height: 1 !important;
  box-sizing: border-box !important;
  border-bottom: 1px solid rgba(0,0,0,.06) !important;
}
.hears-compare .features li:last-child,
.hears-compare .col li:last-child{ border-bottom: none !important; }

/* Left column stays left-aligned; clamp text to avoid growing the row */
.hears-compare .features li{
  justify-content: flex-start !important;
  display: -webkit-box !important;
  -webkit-box-orient: vertical !important;
  -webkit-line-clamp: 2 !important;     /* max 2 lines */
  overflow: hidden !important;
}

/* 3) ✓ uses a 24×24 white circle */
.hears-compare .icon-check-small{
  width: 24px; height: 24px;
  border-radius: 999px;
  background: #fff;
  display: inline-flex; align-items: center; justify-content: center;
}
.hears-compare .icon-check-small svg{ width: 14px; height: 14px; display:block; }

/* 4) Turn ANY 'no' cell (even if it contains plain '✕' text) into the same 24×24 box */
.hears-compare .col li.no{
  position: relative !important;
  font-size: 0 !important;              /* hide text '✕' if present */
  background: transparent !important;
  padding: 0 !important; margin: 0 !important;
}
/* draw the X in a 24×24 white circle, centered */
.hears-compare .col li.no::before{
  content: "";
  width: 24px; height: 24px;
  border-radius: 999px;
  background: #fff;
  display: inline-block;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 14px 14px;
  /* crisp SVG X */
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>\
<path d='M6 6l12 12M18 6L6 18' stroke='%23d54d51' stroke-width='2.2' stroke-linecap='round' fill='none'/>\
</svg>");
}
/* --- Show only ONE X in "no" cells --- */

/* Hide any existing content (text ✕ or span/svg) inside .no cells */
.hears-compare .col li.no{
  font-size: 0 !important;               /* hides plain text ✕ */
  position: relative !important;
}
.hears-compare .col li.no .icon-check-small,
.hears-compare .col li.no .cross-mark{
  display: none !important;              /* hide any span/svg we might have kept */
}

/* Keep our single X via ::before in the same 24×24 box as ✓ */
.hears-compare .col li.no::before{
  content: "";
  width: 24px; height: 24px;
  border-radius: 999px;
  background: #fff;
  display: inline-block;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 14px 14px;
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>\
<path d='M6 6l12 12M18 6L6 18' stroke='%23d54d51' stroke-width='2.2' stroke-linecap='round' fill='none'/>\
</svg>");
}
/* --- Visually center benefits text & add breathing room from dividers --- */
.hears-compare .features li{
  align-items: center !important;     /* vertical center */
  justify-content: flex-start !important;
  line-height: 1.32 !important;       /* nicer two-line rhythm */
  padding-top: 6px !important;        /* space from the top divider */
  padding-bottom: 6px !important;     /* space from the bottom divider */
}

/* If any cells still look a hair high, nudge all labels down 1px (optional) */
@media (min-width: 768px){
  .hears-compare .features li{ transform: translateY(1px); }
}
/* ---------- BENEFITS COLUMN: width + clean multi-line centering ---------- */

/* desktop/tablet — give the feature column more room */
@media (min-width: 769px){
  .hears-compare .table-head,
  .hears-compare .table-body{
    /* wider first column so 3–4 words don’t get ellipsized mid-word */
    grid-template-columns: minmax(280px, 2fr) repeat(3, minmax(0, 1fr)) !important;
  }
}

/* mobile — a little wider than before for readability */
@media (max-width: 768px){
  .hears-compare .table-head,
  .hears-compare .table-body{
    grid-template-columns: 140px repeat(3, minmax(0, 1fr)) !important; /* was 115px */
  }
}

/* center the text vertically in the row and give it breathing room */
.hears-compare .features li{
  align-items: center !important;         /* vertical center */
  justify-content: flex-start !important; /* text left */
  padding-top: 8px !important;            /* space away from divider */
  padding-bottom: 8px !important;
  line-height: 1.34 !important;
  transform: none !important;             /* clear any earlier nudge */
}

/* if you added the <span class="feature-label"> wrapper, polish its wrapping */
.hears-compare .feature-label{
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;                  /* keep rows even */
  overflow: hidden;
  text-overflow: ellipsis;

  white-space: normal;
  word-break: normal;                      /* avoid breaking in the middle of words */
  overflow-wrap: anywhere;                 /* still break very long single words if needed */
  hyphens: auto;                           /* nicer hyphenation when needed */
}
/* Force the ✓ container to be a perfect circle on mobile */
@media (max-width: 768px){
  .hears-compare .icon-check-small{
    width: 22px !important;
    height: 22px !important;
    min-width: 22px !important;
    min-height: 22px !important;
    aspect-ratio: 1 / 1;              /* guarantees square */
    border-radius: 999px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    line-height: 1 !important;        /* prevents vertical stretch */
  }
  .hears-compare .icon-check-small svg{
    width: 12px !important;
    height: 12px !important;
    display: block !important;
  }
  /* make sure the cell itself isn't stretching the icon */
  .hears-compare .col li{
    align-items: center !important;
    line-height: 1 !important;
  }
}
/* Center the heading + subtext in the left column */
.hears-compare .copy{
  text-align: center !important;
  max-width: 720px;          /* keep lines nice and short */
  margin-inline: auto;       /* center the block itself */
}

.hears-compare .title{
  margin: 0 auto 16px !important;
}

.hears-compare .subtitle{
  margin: 0 auto !important;
  opacity: .9;
}

/* Optional: a little extra breathing room under the copy */
@media (min-width: 1025px){
  .hears-compare .copy{ padding-right: 10px; }
}

  </style>
</section>

{% schema %}
{
  "name": "Hears – Comparison",
  "class": "section-hears-compare",
  "settings": [
    { "type": "text", "id": "title", "label": "Heading", "default": "Why Hears is" },
    { "type": "text", "id": "highlight", "label": "Highlighted word(s)", "default": "perfect choice." },
    { "type": "text", "id": "subtitle", "label": "Subtext", "default": "The earplug that reduces noise but keeps sound clear." },

    { "type": "range", "id": "title_size", "min": 24, "max": 72, "step": 1, "unit": "px", "label": "Title size (desktop)", "default": 48 },
    { "type": "range", "id": "title_size_mobile", "min": 20, "max": 60, "step": 1, "unit": "px", "label": "Title size (mobile)", "default": 36 },

    { "type": "image_picker", "id": "hears_logo", "label": "Hears logo" },
    { "type": "image_picker", "id": "other_logo", "label": "Other earplugs image" },
    { "type": "text", "id": "other_label", "label": "Other label", "default": "Other Earplugs" },
    { "type": "image_picker", "id": "foam_logo",  "label": "Foam earplugs image" },
    { "type": "text", "id": "foam_label",  "label": "Foam label", "default": "Foam Earplugs" },

    { "type": "color", "id": "text_color", "label": "Text color", "default": "#000000" },
    { "type": "color", "id": "accent_color", "label": "Accent color", "default": "#feba84" },

    { "type": "color", "id": "col1_bg_start", "label": "Features bg start", "default": "#f7f7f7" },
    { "type": "color", "id": "col1_bg_end", "label": "Features bg end", "default": "#f7f7f7" },
    { "type": "color", "id": "col1_text", "label": "Features text color", "default": "#1a1a1a" },

    { "type": "color", "id": "hears_bg_start", "label": "Hears column start", "default": "#ef7273" },
    { "type": "color", "id": "hears_bg_end", "label": "Hears column end", "default": "#faa37d" },
    { "type": "color", "id": "hears_text", "label": "Hears column text", "default": "#ffffff" }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Feature row",
      "settings": [
        { "type": "text", "id": "feature", "label": "Feature", "default": "Easy to Clean" },
        { "type": "checkbox", "id": "other_has", "label": "Other Earplugs have it", "default": true },
        { "type": "checkbox", "id": "foam_has",  "label": "Foam Earplugs have it", "default": true }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hears – Comparison",
      "blocks": [
        { "type": "row", "settings": { "feature": "Easy to Clean", "other_has": true, "foam_has": true } },
        { "type": "row", "settings": { "feature": "Trusted by Professionals", "other_has": true, "foam_has": true } },
        { "type": "row", "settings": { "feature": "Stylish and Discreet", "other_has": true, "foam_has": false } },
        { "type": "row", "settings": { "feature": "Durable and Eco-Friendly", "other_has": true, "foam_has": false } },
        { "type": "row", "settings": { "feature": "Versatile Use", "other_has": true, "foam_has": false } },
        { "type": "row", "settings": { "feature": "Superior Sound Filtering", "other_has": false, "foam_has": false } },
        { "type": "row", "settings": { "feature": "Always a perfect fit", "other_has": false, "foam_has": false } },
        { "type": "row", "settings": { "feature": "Safe for Sensitive Skin", "other_has": false, "foam_has": false } }
      ]
    }
  ]
}
{% endschema %}
